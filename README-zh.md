# Video Script Monitor

[![English](https://img.shields.io/badge/English-Click-yellow)](README.md)
[![ä¸­æ–‡æ–‡æ¡£](https://img.shields.io/badge/ä¸­æ–‡æ–‡æ¡£-ç‚¹å‡»æŸ¥çœ‹-orange)](README-zh.md)

è§†é¢‘è„šæœ¬ä¸ç´ æå®æ—¶ç›‘æ§å·¥å…· | AIè§†é¢‘ç”Ÿæˆé¡¹ç›®å¯è§†åŒ–ç›‘æ§ç³»ç»Ÿ

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š å®æ—¶æ–‡ä»¶ç›‘æ§å’Œå˜åŒ–æ£€æµ‹
- ğŸ¬ æ—¶é—´è½´å¯è§†åŒ–å±•ç¤º
- ğŸ”” WebSocketå®æ—¶é€šä¿¡
- ğŸ“ å¤šç±»å‹æ–‡ä»¶æ”¯æŒï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€æç¤ºè¯ï¼‰
- ğŸ‘ï¸ å®æ—¶é¢„è§ˆå’Œè¯¦æƒ…å±•ç¤º

## æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js + TypeScript + Express + WebSocket
- **å‰ç«¯**: React + TypeScript + Vite + D3.js
- **æ–‡ä»¶ç›‘æ§**: chokidar
- **çŠ¶æ€ç®¡ç†**: Zustand
- **åŒ…ç®¡ç†**: pnpm

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- pnpm >= 8.0.0

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯
pnpm run dev

# æˆ–åˆ†åˆ«å¯åŠ¨
pnpm run dev:backend  # åç«¯æœåŠ¡ (ç«¯å£ 8080)
pnpm run dev:frontend # å‰ç«¯æœåŠ¡ (ç«¯å£ 3000)
```

### è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000

## é¡¹ç›®ç»“æ„

```
video-script-monitor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/          # åç«¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ fileWatcher.ts    # æ–‡ä»¶ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ scriptParser.ts   # è„šæœ¬è§£æ
â”‚   â”‚   â”œâ”€â”€ websocket.ts      # WebSocketæœåŠ¡
â”‚   â”‚   â””â”€â”€ server.ts         # ExpressæœåŠ¡å™¨
â”‚   â”œâ”€â”€ frontend/         # å‰ç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ components/       # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ shared/           # å…±äº«ä»£ç 
â”‚       â””â”€â”€ types/         # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ data/                 # æµ‹è¯•æ•°æ®ç›®å½•
â””â”€â”€ public/              # é™æ€èµ„æº
```

## ä½¿ç”¨è¯´æ˜

1. **å¯åŠ¨ç›‘æ§**: ç‚¹å‡»"å¯åŠ¨ç›‘æ§"æŒ‰é’®å¼€å§‹ç›‘æ§AI Agentäº§å‡ºç‰©
2. **æŸ¥çœ‹ä»»åŠ¡**: åœ¨å·¦ä¾§ä»»åŠ¡åˆ—è¡¨ä¸­é€‰æ‹©è§†é¢‘ä»»åŠ¡
3. **æ—¶é—´è½´æµè§ˆ**: åœ¨ä¸»æ—¶é—´è½´ä¸ŠæŸ¥çœ‹åˆ†é•œå’Œç´ æ
4. **è¯¦æƒ…æŸ¥çœ‹**: ç‚¹å‡»åˆ†é•œæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
5. **ç´ æé¢„è§ˆ**: ç‚¹å‡»ç´ ææ–‡ä»¶è¿›è¡Œé¢„è§ˆ

## å¼€å‘æŒ‡å—

### åç«¯æ–‡æ¡£

#### API æ–‡æ¡£

**æ¥å£æ–‡æ¡£**: http://localhost:8080/api-docs

#### API æ¥å£

**åŸºç¡€URL**: `http://localhost:8080`

**ä»»åŠ¡ç®¡ç†**
- `GET /api/tasks` - è·å–æ‰€æœ‰è§†é¢‘ä»»åŠ¡
- `GET /api/tasks/:videoId` - è·å–ç‰¹å®šä»»åŠ¡è¯¦æƒ…
- `POST /api/tasks/:videoId/start` - å¼€å§‹ç›‘æ§ä»»åŠ¡
- `POST /api/tasks/:videoId/stop` - åœæ­¢ç›‘æ§ä»»åŠ¡

**æ–‡ä»¶ç›‘æ§**
- `GET /api/files/:videoId` - è·å–ä»»åŠ¡çš„æ‰€æœ‰æ–‡ä»¶
- `GET /api/files/:videoId/:fileId` - è·å–ç‰¹å®šæ–‡ä»¶è¯¦æƒ…

#### WebSocket è¿æ¥

**è¿æ¥URL**: `ws://localhost:8080`

**æ¶ˆæ¯ç±»å‹**
- `fileAdded` - æ–‡ä»¶æ·»åŠ 
- `fileModified` - æ–‡ä»¶ä¿®æ”¹  
- `fileDeleted` - æ–‡ä»¶åˆ é™¤
- `scriptUpdated` - è„šæœ¬æ›´æ–°
- `taskUpdated` - ä»»åŠ¡æ›´æ–°

#### åç«¯æºä»£ç ç»“æ„

```
src/backend/
â”œâ”€â”€ fileWatcher.ts    # æ–‡ä»¶ç³»ç»Ÿç›‘æ§æœåŠ¡
â”œâ”€â”€ scriptParser.ts   # Script.jsonè§£æå·¥å…·
â”œâ”€â”€ websocket.ts      # WebSocketæœåŠ¡å™¨å®ç°
â”œâ”€â”€ server.ts         # ExpressæœåŠ¡å™¨è®¾ç½®
â””â”€â”€ routes/           # APIè·¯ç”±å¤„ç†å™¨
    â”œâ”€â”€ tasks.ts      # ä»»åŠ¡ç®¡ç†è·¯ç”±
    â””â”€â”€ files.ts      # æ–‡ä»¶ç®¡ç†è·¯ç”±
```

### æ•°æ®æ ¼å¼

å‚è€ƒ `src/shared/types/index.ts` ä¸­çš„ç±»å‹å®šä¹‰

### åç«¯å¼€å‘

å•ç‹¬å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼š
```bash
pnpm run dev:backend
```

åç«¯å°†åœ¨ç«¯å£8080ä¸Šè¿è¡Œï¼Œå¹¶å¯ç”¨çƒ­é‡è½½ã€‚
